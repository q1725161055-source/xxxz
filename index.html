<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CAACÊó†‰∫∫Êú∫ÊâßÁÖß</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #007AFF;
            --bg-gradient-start: #E8F4FF;
            --bg-gradient-end: #F0F7FF;
            --card-bg: white;
            --text-primary: #2C3E50;
            --text-secondary: #666;
            --text-tertiary: #999;
            --shadow-color: rgba(0,0,0,0.06);
            --shadow-hover: rgba(0,0,0,0.08);
            --border-color: #E0E8F5;
            --nav-bg: white;
            --nav-shadow: rgba(0,0,0,0.05);
            --status-bar-text: #333;
            --mode-card-gradient-start: #E8F2FF;
            --mode-card-gradient-end: #D4E5FF;
            --modal-bg: rgba(0,0,0,0.5);
            --success-color: #52c41a;
            --error-color: #ff4d4f;
            --warning-color: #faad14;
        }

        body.dark-mode {
            --bg-gradient-start: #1a1f2e;
            --bg-gradient-end: #242938;
            --card-bg: #2d3142;
            --text-primary: #E8E8E8;
            --text-secondary: #B8B8B8;
            --text-tertiary: #808080;
            --shadow-color: rgba(0,0,0,0.3);
            --shadow-hover: rgba(0,0,0,0.4);
            --border-color: #3a3f52;
            --nav-bg: #2d3142;
            --nav-shadow: rgba(0,0,0,0.3);
            --status-bar-text: #E8E8E8;
            --mode-card-gradient-start: #2a3f5f;
            --mode-card-gradient-end: #1e2f47;
            --modal-bg: rgba(0,0,0,0.7);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(180deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        /* Â§¥ÈÉ®ÂØºËà™ */
        .top-header {
            background: var(--card-bg);
            padding: 12px 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-bottom {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .license-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .app-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .app-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* ÊâßÁÖßÁ±ªÂûãÈÄâÊã©Âô® */
        .license-selector {
            padding: 8px 12px;
            background: var(--bg-gradient-start);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .license-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 5px;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 12px var(--shadow-hover);
            display: none;
            z-index: 100;
            min-width: 180px;
        }

        .license-dropdown.active {
            display: block;
        }

        .license-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 14px;
            color: var(--text-primary);
        }

        .license-option:hover {
            background: var(--bg-gradient-start);
        }

        .license-option.selected {
            background: var(--primary-color);
            color: white;
        }

        .license-option:first-child {
            border-radius: 8px 8px 0 0;
        }

        .license-option:last-child {
            border-radius: 0 0 8px 8px;
        }

        /* È¢úËâ≤ÈÄâÊã©Âô® */
        .color-picker-wrapper {
            position: relative;
        }

        .color-picker-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            border: 2px solid var(--card-bg);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow-hover);
        }

        .color-picker-panel {
            position: absolute;
            top: 45px;
            right: 0;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 20px var(--shadow-hover);
            display: none;
            z-index: 100;
        }

        .color-picker-panel.active {
            display: block;
        }

        .color-presets {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .color-preset {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .color-preset:hover {
            transform: scale(1.2);
            border-color: var(--primary-color);
        }

        .theme-mode-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }

        .toggle-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ‰ºòÂåñ */
        .theme-switch {
            width: 48px;
            height: 24px;
            background: #ccc;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
        }

        .theme-switch.active {
            background: var(--primary-color);
        }

        .theme-switch-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .theme-switch.active .theme-switch-slider {
            transform: translateX(24px);
        }

        /* ÁªÉ‰π†ËøõÂ∫¶Âç°Áâá */
        .practice-card {
            margin: 20px;
            background: linear-gradient(135deg, var(--mode-card-gradient-start) 0%, var(--mode-card-gradient-end) 100%);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px var(--shadow-color);
            transition: all 0.3s ease;
        }

        .practice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .practice-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
        }

        .practice-count {
            color: var(--text-secondary);
            font-size: 16px;
        }

        .practice-subtitle {
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .progress-circle {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            position: relative;
        }

        .progress-circle svg {
            transform: rotate(-90deg);
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* È¢òÂ∫ìÂç°Áâá */
        .topic-cards {
            display: flex;
            gap: 15px;
            margin: 20px;
        }

        .topic-card {
            flex: 1;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-hover);
        }

        .topic-icon {
            width: 50px;
            height: 50px;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .topic-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .topic-desc {
            font-size: 13px;
            color: var(--text-tertiary);
        }

        /* ÂäüËÉΩÊåâÈíÆÁªÑ */
        .function-buttons {
            display: flex;
            justify-content: space-around;
            padding: 20px 40px;
            background: var(--card-bg);
            margin: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .function-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .function-btn:hover {
            transform: scale(1.05);
        }

        .function-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .function-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Ê®°ÊãüËÄÉËØïÈ°µÈù¢ */
        .exam-section {
            margin: 20px;
            display: none;
        }

        .exam-modes {
            display: grid;
            gap: 20px;
        }

        .exam-mode-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 12px var(--shadow-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .exam-mode-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px var(--shadow-hover);
        }

        .exam-mode-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .exam-mode-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ongoing-exam-badge {
            background: var(--warning-color);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* ËÄÉËØïËÆ∞ÂΩïÈ°µÈù¢ */
        .exam-records {
            margin: 20px;
            display: none;
        }

        .records-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .record-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px var(--shadow-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .record-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px var(--shadow-hover);
        }

        .record-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .record-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .record-score {
            font-size: 20px;
            font-weight: bold;
        }

        .record-score.pass {
            color: var(--success-color);
        }

        .record-score.fail {
            color: var(--error-color);
        }

        .record-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .record-status.ongoing {
            background: var(--warning-color);
            color: white;
        }

        .record-status.completed {
            background: var(--success-color);
            color: white;
        }

        /* ËØïÂç∑ËØ¶ÊÉÖÈ°µÈù¢ */
        .paper-detail {
            display: none;
            margin: 20px;
        }

        .paper-header {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .paper-stats {
            display: flex;
            gap: 30px;
            margin-top: 15px;
        }

        .paper-stat {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .paper-stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .paper-stat-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Áè≠Á∫ßÂäüËÉΩÈ°µÈù¢ */
        .class-section {
            display: none;
            margin: 20px;
        }

        .class-join-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px var(--shadow-color);
            text-align: center;
        }

        .class-join-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .class-input-group {
            display: flex;
            gap: 15px;
            max-width: 400px;
            margin: 0 auto 20px;
        }

        .class-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            background: var(--bg-gradient-start);
            color: var(--text-primary);
            text-align: center;
            letter-spacing: 2px;
        }

        .class-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .class-join-btn {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .class-join-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .class-info {
            margin-top: 30px;
            padding: 20px;
            background: var(--bg-gradient-start);
            border-radius: 12px;
            display: none;
        }

        .class-info.active {
            display: block;
        }

        .class-info-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .class-details {
            display: flex;
            flex-direction: column;
            gap: 10px;
            color: var(--text-secondary);
        }

        /* Ê®°ÊÄÅÊ°Ü */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--modal-bg);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            width: 90%;
            max-width: 400px;
            animation: slideUp 0.3s;
        }

        .modal-header {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            cursor: pointer;
            font-size: 24px;
            color: var(--text-tertiary);
        }

        /* Â∫ïÈÉ®ÂØºËà™ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--nav-bg);
            display: flex;
            justify-content: space-around;
            padding: 10px 0 25px;
            box-shadow: 0 -2px 10px var(--nav-shadow);
            transition: all 0.3s ease;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            color: var(--text-tertiary);
            transition: all 0.2s;
            flex: 1;
        }

        .nav-item:hover {
            transform: scale(1.1);
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 11px;
        }

        /* Â∫ïÈÉ®ÊåáÁ§∫Êù° */
        .bottom-indicator {
            position: fixed;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 134px;
            height: 5px;
            background: var(--text-primary);
            border-radius: 3px;
        }

        /* Âä®Áîª */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Èó™Âç°ËÆ∞ÂøÜÈ°µÈù¢ */
        .flashcard-section {
            display: none;
            margin: 20px;
            min-height: 500px;
        }

        .flashcard-container {
            position: relative;
            height: 400px;
            margin: 20px auto;
            max-width: 400px;
        }

        .flashcard {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow-hover);
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: grab;
            transition: transform 0.3s, opacity 0.3s;
            touch-action: pan-y;
        }

        .flashcard.dragging {
            cursor: grabbing;
            transition: none;
        }

        .flashcard.swipe-right {
            transform: translateX(100%) rotate(20deg);
            opacity: 0;
        }

        .flashcard.swipe-left {
            transform: translateX(-100%) rotate(-20deg);
            opacity: 0;
        }

        .flashcard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .flashcard-type {
            background: var(--primary-color);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .flashcard-number {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .flashcard-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .flashcard-question {
            font-size: 18px;
            line-height: 1.8;
            color: var(--text-primary);
            margin-bottom: 30px;
        }

        .flashcard-answer {
            background: var(--bg-gradient-start);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .flashcard-answer-title {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .flashcard-answer-text {
            font-size: 16px;
            color: var(--primary-color);
            font-weight: 600;
        }

        .flashcard-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .flashcard-hint {
            display: flex;
            gap: 30px;
            justify-content: center;
            width: 100%;
        }

        .hint-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .flashcard-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .flashcard-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 24px;
        }

        .flashcard-btn-skip {
            background: var(--error-color);
            color: white;
        }

        .flashcard-btn-skip:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(255, 77, 79, 0.4);
        }

        .flashcard-btn-collect {
            background: var(--success-color);
            color: white;
        }

        .flashcard-btn-collect:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(82, 196, 26, 0.4);
        }

        /* Á´†ËäÇÂ≠¶‰π†È°µÈù¢ */
        .chapter-section {
            display: none;
            margin: 20px;
        }

        .chapter-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chapter-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .chapter-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px var(--shadow-hover);
        }

        .chapter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .chapter-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chapter-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            width: 100px;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .chapter-count {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .chapter-desc {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* ÈîôÈ¢òÊú¨È°µÈù¢ */
        .mistakes-section {
            display: none;
            margin: 20px;
        }

        .mistakes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .mistakes-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
        }

        .mistakes-count {
            background: var(--error-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .mistakes-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .mistake-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
            border-left: 4px solid var(--error-color);
        }

        /* Êî∂ËóèÂ§πÈ°µÈù¢ */
        .favorites-section {
            display: none;
            margin: 20px;
        }

        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .favorites-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
        }

        .favorites-count {
            background: var(--warning-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .favorites-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .favorite-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
            border-left: 4px solid var(--warning-color);
            position: relative;
        }

        .remove-favorite {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--bg-gradient-start);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-tertiary);
            transition: all 0.3s;
        }

        .remove-favorite:hover {
            background: var(--error-color);
            color: white;
            transform: scale(1.1);
        }
        body {
            padding-bottom: 100px;
        }

        /* Ëá™ÂÆö‰πâÈ¢úËâ≤‰∏ªÈ¢ò */
        body[data-theme="blue"] {
            --primary-color: #007AFF;
        }

        body[data-theme="green"] {
            --primary-color: #34c759;
        }

        body[data-theme="purple"] {
            --primary-color: #5856d6;
        }

        body[data-theme="orange"] {
            --primary-color: #ff9500;
        }

        body[data-theme="pink"] {
            --primary-color: #ff2d55;
        }

        /* ‰∏™‰∫∫‰∏≠ÂøÉÈ°µÈù¢ */
        .profile-section {
            display: none;
            margin: 20px;
        }

        .login-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px var(--shadow-color);
            text-align: center;
        }

        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .login-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 30px;
        }

        .login-input-group {
            margin-bottom: 20px;
        }

        .login-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            background: var(--bg-gradient-start);
            color: var(--text-primary);
        }

        .login-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .profile-header {
            background: linear-gradient(135deg, var(--primary-color), #0056b3);
            border-radius: 16px;
            padding: 30px 20px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }

        .profile-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .profile-id {
            font-size: 14px;
            opacity: 0.8;
        }

        .profile-menu {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .profile-menu-item {
            padding: 18px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
        }

        .profile-menu-item:last-child {
            border-bottom: none;
        }

        .profile-menu-item:hover {
            background: var(--bg-gradient-start);
        }

        .menu-item-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-item-icon {
            width: 36px;
            height: 36px;
            background: var(--bg-gradient-start);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .menu-item-text {
            color: var(--text-primary);
            font-size: 16px;
        }

        .menu-item-arrow {
            color: var(--text-tertiary);
            font-size: 18px;
        }

        /* ÊâìÂç°È°µÈù¢ */
        .checkin-section {
            display: none;
            margin: 20px;
        }

        .checkin-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px var(--shadow-color);
            text-align: center;
            margin-bottom: 20px;
        }

        .checkin-btn {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), #0056b3);
            color: white;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .checkin-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.4);
        }

        .checkin-btn.checked {
            background: var(--success-color);
            cursor: not-allowed;
        }

        .checkin-calendar {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            background: var(--bg-gradient-start);
            color: var(--text-secondary);
        }

        .calendar-day.checked {
            background: var(--success-color);
            color: white;
        }

        .calendar-day.today {
            border: 2px solid var(--primary-color);
            font-weight: bold;
        }

        /* Á≠îÈ¢òÁªüËÆ°È°µÈù¢ */
        .statistics-section {
            display: none;
            margin: 20px;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .daily-records {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .record-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .record-item:last-child {
            border-bottom: none;
        }

        .record-date {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .record-stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .record-count {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .record-accuracy {
            font-size: 14px;
            color: var(--success-color);
        }
    </style>
</head>
<body>
    <!-- È°∂ÈÉ®ÂØºËà™ -->
    <div class="top-header">
        <div class="header-top">
            <div class="header-left">
                <div class="app-title">CAACÊó†‰∫∫Êú∫ÊâßÁÖß</div>
            </div>
            <div class="header-right">
                <!-- È¢úËâ≤ÈÄâÊã©Âô® -->
                <div class="color-picker-wrapper">
                    <div class="color-picker-btn" onclick="toggleColorPicker()"></div>
                    <div class="color-picker-panel" id="colorPickerPanel">
                        <div class="color-presets">
                            <div class="color-preset" style="background: #007AFF;" onclick="changeThemeColor('blue')"></div>
                            <div class="color-preset" style="background: #34c759;" onclick="changeThemeColor('green')"></div>
                            <div class="color-preset" style="background: #5856d6;" onclick="changeThemeColor('purple')"></div>
                            <div class="color-preset" style="background: #ff9500;" onclick="changeThemeColor('orange')"></div>
                            <div class="color-preset" style="background: #ff2d55;" onclick="changeThemeColor('pink')"></div>
                        </div>
                        <div class="theme-mode-toggle">
                            <span class="toggle-label">Ê∑±Ëâ≤Ê®°Âºè</span>
                            <div class="theme-switch" id="themeSwitch" onclick="toggleDarkMode()">
                                <div class="theme-switch-slider">‚òÄÔ∏è</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÊâßÁÖßÁ±ªÂûãÈÄâÊã© -->
        <div class="header-bottom">
            <span class="license-label">ÊâßÁÖßÁ±ªÂûãÔºö</span>
            <div style="position: relative; flex: 1; max-width: 200px;">
                <div class="license-selector" onclick="toggleLicenseDropdown()">
                    <span id="currentLicense">Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò</span>
                    <span>‚ñº</span>
                </div>
                <div class="license-dropdown" id="licenseDropdown">
                    <div class="license-option" onclick="selectLicense('ËßÜË∑ùÂÜÖÈ©æÈ©∂Âëò')">ËßÜË∑ùÂÜÖÈ©æÈ©∂Âëò</div>
                    <div class="license-option" onclick="selectLicense('Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò')">Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò</div>
                    <div class="license-option" onclick="selectLicense('ÊïôÂëò')">ÊïôÂëò</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‰∏ªÈ°µÂÜÖÂÆπ -->
    <div id="mainContent">
        <!-- ÁªÉ‰π†ËøõÂ∫¶Âç°Áâá -->
        <div class="practice-card">
            <div class="practice-header">
                <div>
                    <div class="practice-title">È°∫Â∫èÁªÉ‰π†</div>
                </div>
                <div class="practice-count">0/1127</div>
            </div>
            <div class="practice-subtitle">Âæ™Â∫èÊ∏êËøõÂä≥ÂÆûÂü∫Á°Ä</div>
            <div class="progress-circle">
                <svg width="150" height="150">
                    <circle cx="75" cy="75" r="65" stroke="var(--border-color)" stroke-width="10" fill="none"/>
                    <circle cx="75" cy="75" r="65" stroke="var(--primary-color)" stroke-width="10" fill="none" 
                            stroke-dasharray="408" stroke-dashoffset="408"/>
                </svg>
                <div class="progress-text">0%</div>
            </div>
        </div>

        <!-- È¢òÂ∫ìÂç°Áâá -->
        <div class="topic-cards">
            <div class="topic-card">
                <div class="topic-icon">üìù</div>
                <div class="topic-title">Á≤æÁÆÄÈ¢òÂ∫ì</div>
                <div class="topic-desc">È©æËÄÉÈÄöÂÖ≥Êõ¥ÁÆÄÂçï</div>
            </div>
            <div class="topic-card">
                <div class="topic-icon">üìã</div>
                <div class="topic-title">Ê®°ÊãüËÄÉËØï</div>
                <div class="topic-desc">Ê®°ËÄÉÈ™åÁúüÊèêÂàÜÂø´</div>
            </div>
        </div>

        <!-- ÂäüËÉΩÊåâÈíÆÁªÑ -->
        <div class="function-buttons">
            <div class="function-btn" onclick="showMistakes()">
                <div class="function-icon">‚ùå</div>
                <div class="function-label">ÈîôÈ¢òÊú¨</div>
            </div>
            <div class="function-btn" onclick="showFavorites()">
                <div class="function-icon">‚≠ê</div>
                <div class="function-label">Êî∂ËóèÂ§π</div>
            </div>
            <div class="function-btn" onclick="showFlashcards()">
                <div class="function-icon">üé¥</div>
                <div class="function-label">Èó™Âç°ËÆ∞ÂøÜ</div>
            </div>
        </div>
        
        <!-- Êõ¥Â§öÂäüËÉΩÊåâÈíÆÁªÑ -->
        <div class="function-buttons">
            <div class="function-btn" onclick="alert('Á´†ËäÇÁªÉ‰π†ÂäüËÉΩÂºÄÂèë‰∏≠...')">
                <div class="function-icon">‚úèÔ∏è</div>
                <div class="function-label">Á´†ËäÇÁªÉ‰π†</div>
            </div>
            <div class="function-btn" onclick="alert('ÊØèÊó•‰∏ÄÁªÉÂäüËÉΩÂºÄÂèë‰∏≠...')">
                <div class="function-icon">‚úì</div>
                <div class="function-label">ÊØèÊó•‰∏ÄÁªÉ</div>
            </div>
            <div class="function-btn" onclick="alert('Ê®°ÊãüÊµãËØïÂäüËÉΩÂºÄÂèë‰∏≠...')">
                <div class="function-icon">üìù</div>
                <div class="function-label">Ê®°ÊãüÊµãËØï</div>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊãüËÄÉËØïÈ°µÈù¢ -->
    <div class="exam-section" id="examSection">
        <div class="exam-modes">
            <!-- ÈôêÊó∂ËÄÉËØïÊ®°Âºè -->
            <div class="exam-mode-card" onclick="openExamSettings('timed')">
                <div class="exam-mode-header">
                    <div class="exam-mode-title">
                        <span>‚è∞</span>
                        <span>ÈôêÊó∂ËÄÉËØïÊ®°Âºè</span>
                    </div>
                    <span class="ongoing-exam-badge" id="timedExamBadge" style="display:none;">ËøõË°å‰∏≠</span>
                </div>
            </div>

            <!-- ÂÖ®ÁúüÊ®°ÊãüÊ®°Âºè -->
            <div class="exam-mode-card" onclick="startRealExam()">
                <div class="exam-mode-header">
                    <div class="exam-mode-title">
                        <span>üéØ</span>
                        <span>ÂÖ®ÁúüÊ®°ÊãüÊ®°Âºè</span>
                    </div>
                </div>
            </div>

            <!-- Á´†ËäÇËØïÁÇºÊ®°Âºè -->
            <div class="exam-mode-card" onclick="openChapterSelect()">
                <div class="exam-mode-header">
                    <div class="exam-mode-title">
                        <span>üìö</span>
                        <span>Á´†ËäÇËØïÁÇºÊ®°Âºè</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËÄÉËØïËÆ∞ÂΩïÊåâÈíÆ -->
        <div style="margin: 20px;">
            <button onclick="showExamRecords()" style="width: 100%; padding: 15px; background: var(--card-bg); border: none; border-radius: 12px; color: var(--text-primary); font-size: 16px; cursor: pointer; box-shadow: 0 2px 8px var(--shadow-color);">
                Êü•ÁúãËÄÉËØïËÆ∞ÂΩï ‚Üí
            </button>
        </div>
    </div>

    <!-- ËÄÉËØïËÆ∞ÂΩïÈ°µÈù¢ -->
    <div class="exam-records" id="examRecords">
        <div class="records-header">
            <h2 style="color: var(--text-primary);">ËÄÉËØïËÆ∞ÂΩï</h2>
            <button onclick="backToExam()" style="padding: 8px 16px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõû</button>
        </div>
        <div id="recordsList"></div>
    </div>

    <!-- ËØïÂç∑ËØ¶ÊÉÖÈ°µÈù¢ -->
    <div class="paper-detail" id="paperDetail">
        <div class="paper-header">
            <h2 style="color: var(--text-primary); margin-bottom: 15px;">ËØïÂç∑ËØ¶ÊÉÖ</h2>
            <div class="paper-stats">
                <div class="paper-stat">
                    <span class="paper-stat-label">ÂæóÂàÜ</span>
                    <span class="paper-stat-value" id="paperScore">0ÂàÜ</span>
                </div>
                <div class="paper-stat">
                    <span class="paper-stat-label">Ê≠£Á°ÆÁéá</span>
                    <span class="paper-stat-value" id="paperAccuracy">0%</span>
                </div>
                <div class="paper-stat">
                    <span class="paper-stat-label">ÈîôÈ¢òÊï∞</span>
                    <span class="paper-stat-value" id="paperWrong">0È¢ò</span>
                </div>
            </div>
        </div>
        <div id="paperQuestions"></div>
        <button onclick="backToRecords()" style="margin: 20px; padding: 12px 24px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõûËÆ∞ÂΩï</button>
    </div>

    <!-- Áè≠Á∫ßÂäüËÉΩÈ°µÈù¢ -->
    <div class="class-section" id="classSection">
        <div class="class-join-card">
            <div class="class-join-title">Âä†ÂÖ•Áè≠Á∫ß</div>
            <div class="class-input-group">
                <input type="text" class="class-input" id="classCode" placeholder="ËØ∑ËæìÂÖ•Áè≠Á∫ßÂè∑" maxlength="6">
                <button class="class-join-btn" onclick="joinClass()">Âä†ÂÖ•</button>
            </div>
            <div class="class-info" id="classInfo">
                <div class="class-info-title">ÂΩìÂâçÁè≠Á∫ß‰ø°ÊÅØ</div>
                <div class="class-details">
                    <div>Áè≠Á∫ßÂêçÁß∞Ôºö<span id="className">--</span></div>
                    <div>ÊâßÁÖßÁ±ªÂûãÔºö<span id="classLicense">--</span></div>
                    <div>Áè≠Á∫ß‰∫∫Êï∞Ôºö<span id="classCount">--</span></div>
                    <div>ÊïôÂëòÂßìÂêçÔºö<span id="classTeacher">--</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Êìç‰ΩúÈ°µÈù¢ -->
    <div class="operation-section" id="operationSection" style="display: none;">
        <div style="padding: 20px; background: var(--card-bg); border-radius: 12px; margin: 20px;">
            <h3 style="color: var(--text-primary); margin-bottom: 20px;">ÂÆûÈôÖÊìç‰ΩúËÄÉÊ†∏</h3>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                <div style="padding: 20px; background: var(--bg-gradient-start); border-radius: 8px; text-align: center; cursor: pointer;">
                    <div style="font-size: 32px; margin-bottom: 8px;">‚ñ∂Ô∏è</div>
                    <div>Êìç‰ΩúÊºîÁ§∫ËßÜÈ¢ë</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‰∏™‰∫∫‰∏≠ÂøÉÈ°µÈù¢ -->
    <div class="profile-section" id="profileSection">
        <!-- ‰∏™‰∫∫‰ø°ÊÅØÂç°Áâá -->
        <div id="profileContent">
            <div class="profile-header" onclick="showLoginModal()" style="cursor: pointer;">
                <div class="profile-avatar" id="profileAvatar">üë§</div>
                <div class="profile-name" id="profileName">Êú™ÁôªÂΩï</div>
                <div class="profile-id" id="profileIdDiv" style="display: none;">ID: <span id="profileId">100001</span></div>
                <div id="loginHint" style="font-size: 14px; opacity: 0.8;">ÁÇπÂáªÁôªÂΩïË¥¶Âè∑</div>
            </div>

            <div class="profile-menu">
                <div class="profile-menu-item" onclick="showLoginModal()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üë§</div>
                        <div class="menu-item-text">ÁôªÂΩïË¥¶Âè∑</div>
                    </div>
                    <div class="menu-item-arrow">‚Ä∫</div>
                </div>
                
                <div class="profile-menu-item" onclick="showNews()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üì∞</div>
                        <div class="menu-item-text">ËµÑËÆØ</div>
                    </div>
                    <div class="menu-item-arrow">‚Ä∫</div>
                </div>
                
                <div class="profile-menu-item" onclick="showChapters()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üìñ</div>
                        <div class="menu-item-text">Á´†ËäÇÂ≠¶‰π†</div>
                    </div>
                    <div class="menu-item-arrow">‚Ä∫</div>
                </div>
                
                <div class="profile-menu-item" onclick="showCheckin()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üìÖ</div>
                        <div class="menu-item-text">ÊØèÊó•ÊâìÂç°</div>
                    </div>
                    <div class="menu-item-arrow">‚Ä∫</div>
                </div>
                
                <div class="profile-menu-item" onclick="showStatistics()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üìä</div>
                        <div class="menu-item-text">Á≠îÈ¢òÁªüËÆ°</div>
                    </div>
                    <div class="menu-item-arrow">‚Ä∫</div>
                </div>
                
                <div class="profile-menu-item" onclick="showLicenseSettings()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üéØ</div>
                        <div class="menu-item-text">ÊâßÁÖßÁ±ªÂûã</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 14px; color: var(--text-secondary);" id="profileLicenseType">Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò</span>
                        <span class="menu-item-arrow">‚Ä∫</span>
                    </div>
                </div>
                
                <div class="profile-menu-item" id="logoutItem" style="display: none;" onclick="handleLogout()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">üö™</div>
                        <div class="menu-item-text">ÈÄÄÂá∫ÁôªÂΩï</div>
                    </div>
                    <div class="menu-item-arrow">‚Ä∫</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÁôªÂΩïÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>ÁôªÂΩïË¥¶Âè∑</span>
                <span class="modal-close" onclick="closeLoginModal()">√ó</span>
            </div>
            <div class="modal-body">
                <div class="login-input-group">
                    <input type="text" class="login-input" id="modalUsername" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç/ÊâãÊú∫Âè∑">
                </div>
                <div class="login-input-group">
                    <input type="password" class="login-input" id="modalPassword" placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å">
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 15px;">
                <button class="modal-btn modal-btn-secondary" onclick="closeLoginModal()" style="flex: 1; padding: 12px; border: none; border-radius: 8px; background: var(--border-color); color: var(--text-primary); font-size: 16px; cursor: pointer;">ÂèñÊ∂à</button>
                <button class="modal-btn modal-btn-primary" onclick="handleLogin()" style="flex: 1; padding: 12px; border: none; border-radius: 8px; background: var(--primary-color); color: white; font-size: 16px; cursor: pointer;">ÁôªÂΩï</button>
            </div>
        </div>
    </div>

    <!-- ÊâìÂç°È°µÈù¢ -->
    <div class="checkin-section" id="checkinSection">
        <div class="checkin-card">
            <h2 style="color: var(--text-primary); margin-bottom: 20px;">‰ªäÊó•ÊâìÂç°</h2>
            <button class="checkin-btn" id="checkinBtn" onclick="doCheckin()">
                <span style="font-size: 48px;">‚úì</span>
                <span>ÊâìÂç°</span>
            </button>
            <div id="checkinStatus" style="color: var(--text-secondary); font-size: 14px;">‰ªäÊó•Êú™ÊâìÂç°</div>
        </div>

        <div class="checkin-calendar">
            <div class="calendar-header">
                <h3>Êú¨ÊúàÊâìÂç°ËÆ∞ÂΩï</h3>
                <span id="currentMonth">2024Âπ¥12Êúà</span>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Êó•ÂéÜÂ∞ÜÈÄöËøáJSÁîüÊàê -->
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="backToProfile()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõû</button>
        </div>
    </div>

    <!-- Á≠îÈ¢òÁªüËÆ°È°µÈù¢ -->
    <div class="statistics-section" id="statisticsSection">
        <h2 style="margin: 0 0 20px; color: var(--text-primary);">Á≠îÈ¢òÁªüËÆ°</h2>
        
        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-value" id="todayCount">0</div>
                <div class="stat-label">‰ªäÊó•Á≠îÈ¢ò</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="todayAccuracy">0%</div>
                <div class="stat-label">‰ªäÊó•Ê≠£Á°ÆÁéá</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalCount">0</div>
                <div class="stat-label">Á¥ØËÆ°Á≠îÈ¢ò</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgAccuracy">0%</div>
                <div class="stat-label">Âπ≥ÂùáÊ≠£Á°ÆÁéá</div>
            </div>
        </div>

        <div class="daily-records">
            <h3 style="margin-bottom: 15px; color: var(--text-primary);">ÊØèÊó•ËÆ∞ÂΩïÂØπÊØî</h3>
            <div id="dailyRecordsList">
                <!-- ËÆ∞ÂΩïÂ∞ÜÈÄöËøáJSÁîüÊàê -->
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="backToProfile()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõû</button>
        </div>
    </div>

    <!-- Èó™Âç°ËÆ∞ÂøÜÈ°µÈù¢ -->
    <div class="flashcard-section" id="flashcardSection">
        <h2 style="margin: 0 0 20px; color: var(--text-primary); text-align: center;">Èó™Âç°ËÆ∞ÂøÜ</h2>
        
        <div class="flashcard-container" id="flashcardContainer">
            <div class="flashcard" id="currentFlashcard">
                <div class="flashcard-header">
                    <span class="flashcard-type">ÂçïÈÄâÈ¢ò</span>
                    <span class="flashcard-number">Á¨¨ <span id="cardNumber">1</span> È¢ò</span>
                </div>
                <div class="flashcard-content">
                    <div class="flashcard-question" id="flashcardQuestion">
                        Êó†‰∫∫Êú∫Âú®ÊâßË°å‰ªªÂä°Êó∂ÔºåÈÅáÂà∞ÊÅ∂Âä£Â§©Ê∞îÂ∫îËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÔºü
                    </div>
                    <div class="flashcard-answer">
                        <div class="flashcard-answer-title">Ê≠£Á°ÆÁ≠îÊ°à</div>
                        <div class="flashcard-answer-text" id="flashcardAnswer">
                            A. Á´ãÂç≥ËøîËà™Âπ∂ÈôçËêΩÂú®ÂÆâÂÖ®Âú∞ÁÇπ
                        </div>
                    </div>
                </div>
                <div class="flashcard-actions">
                    <div class="flashcard-hint">
                        <div class="hint-item">
                            <span>‚Üê</span>
                            <span>Â∑¶ÊªëË∑≥Ëøá</span>
                        </div>
                        <div class="hint-item">
                            <span>Âè≥ÊªëÊî∂Ëóè</span>
                            <span>‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="flashcard-controls">
            <button class="flashcard-btn flashcard-btn-skip" onclick="skipCard()">
                ‚úï
            </button>
            <button class="flashcard-btn flashcard-btn-collect" onclick="collectCard()">
                ‚òÖ
            </button>
        </div>
        
        <div style="margin-top: 30px;">
            <button onclick="backToPractice()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõûÁªÉ‰π†</button>
        </div>
    </div>

    <!-- Á´†ËäÇÂ≠¶‰π†È°µÈù¢ -->
    <div class="chapter-section" id="chapterSection">
        <h2 style="margin: 0 0 20px; color: var(--text-primary);">Á´†ËäÇÂ≠¶‰π†</h2>
        
        <div class="chapter-list" id="chapterList">
            <!-- Á´†ËäÇÂàóË°®Â∞ÜÈÄöËøáJSÁîüÊàê -->
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="backToProfile()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõû</button>
        </div>
    </div>

    <!-- ÈîôÈ¢òÊú¨È°µÈù¢ -->
    <div class="mistakes-section" id="mistakesSection">
        <div class="mistakes-header">
            <h2 class="mistakes-title">ÈîôÈ¢òÊú¨</h2>
            <span class="mistakes-count" id="mistakesCount">0</span>
        </div>
        
        <div class="mistakes-list" id="mistakesList">
            <!-- ÈîôÈ¢òÂàóË°®Â∞ÜÈÄöËøáJSÁîüÊàê -->
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="backToPractice()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõûÁªÉ‰π†</button>
        </div>
    </div>

    <!-- Êî∂ËóèÂ§πÈ°µÈù¢ -->
    <div class="favorites-section" id="favoritesSection">
        <div class="favorites-header">
            <h2 class="favorites-title">Êî∂ËóèÂ§π</h2>
            <span class="favorites-count" id="favoritesCount">0</span>
        </div>
        
        <div class="favorites-list" id="favoritesList">
            <!-- Êî∂ËóèÂàóË°®Â∞ÜÈÄöËøáJSÁîüÊàê -->
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="backToPractice()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõûÁªÉ‰π†</button>
        </div>
    </div>

    <!-- ËµÑËÆØÈ°µÈù¢ -->
    <div class="news-section" id="newsSection">
        <h2 style="margin: 0 0 20px; color: var(--text-primary);">ËµÑËÆØ</h2>
        
        <div class="news-list" id="newsList">
            <!-- ËµÑËÆØÂàóË°®Â∞ÜÈÄöËøáJSÁîüÊàê -->
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="backToProfile()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõû</button>
        </div>
    </div>

    <!-- ËµÑËÆØËØ¶ÊÉÖÈ°µ -->
    <div class="news-detail" id="newsDetail">
        <div class="news-detail-header">
            <div class="news-detail-title" id="newsDetailTitle"></div>
            <div class="news-detail-meta">
                <span id="newsDetailDate"></span>
                <span id="newsDetailCategory"></span>
                <span id="newsDetailAuthor"></span>
            </div>
        </div>
        <div class="news-detail-content" id="newsDetailContent">
            <!-- ËµÑËÆØÂÜÖÂÆπÂ∞ÜÈÄöËøáJSÁîüÊàê -->
        </div>
        <div style="margin-top: 20px;">
            <button onclick="backToNewsList()" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">ËøîÂõûËµÑËÆØÂàóË°®</button>
        </div>
    </div>

    <!-- Â∫ïÈÉ®ÂØºËà™ -->
    <div class="bottom-nav">
        <div class="nav-item active" data-page="practice">
            <div class="nav-icon">üìö</div>
            <div class="nav-label">ÁªÉ‰π†</div>
        </div>
        <div class="nav-item" data-page="exam">
            <div class="nav-icon">üìù</div>
            <div class="nav-label">Ê®°ÊãüËÄÉËØï</div>
        </div>
        <div class="nav-item" data-page="operation">
            <div class="nav-icon">üéÆ</div>
            <div class="nav-label">Êìç‰Ωú</div>
        </div>
        <div class="nav-item" data-page="class">
            <div class="nav-icon">üë•</div>
            <div class="nav-label">Áè≠Á∫ß</div>
        </div>
        <div class="nav-item" data-page="profile">
            <div class="nav-icon">üòä</div>
            <div class="nav-label">ÊàëÁöÑ</div>
        </div>
    </div>

    <!-- Â∫ïÈÉ®ÊåáÁ§∫Êù° -->
    <div class="bottom-indicator"></div>

    <script>
        // ÂÖ®Â±ÄÊï∞ÊçÆ
        let currentUser = null;
        let currentLicenseType = 'Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò';
        let currentClass = null;
        let examRecords = JSON.parse(localStorage.getItem('examRecords') || '[]');
        let ongoingExams = JSON.parse(localStorage.getItem('ongoingExams') || '[]');
        let checkinData = JSON.parse(localStorage.getItem('checkinData') || '{}');
        let dailyStats = JSON.parse(localStorage.getItem('dailyStats') || '[]');
        let mistakeQuestions = JSON.parse(localStorage.getItem('mistakeQuestions') || '[]');
        let favoriteQuestions = JSON.parse(localStorage.getItem('favoriteQuestions') || '[]');
        let currentCardIndex = 0;

        // Áè≠Á∫ßÊï∞ÊçÆÊ®°Êãü
        const classDatabase = {
            'ABC123': {
                name: '2024ÁßãÂ≠£Êó†‰∫∫Êú∫ÂüπËÆ≠Áè≠',
                licenseType: 'ËßÜË∑ùÂÜÖÈ©æÈ©∂Âëò',
                count: 35,
                teacher: 'Âº†ÊïôÂëò'
            },
            'XYZ789': {
                name: 'ÊïôÂëòËµÑÊ†ºÂüπËÆ≠Áè≠',
                licenseType: 'ÊïôÂëò',
                count: 28,
                teacher: 'ÊùéÊïôÂëò'
            }
        };

        // ËµÑËÆØÊï∞ÊçÆÔºàÊ®°ÊãüÂêéÁ´ØÊï∞ÊçÆÔºâ
        const newsData = [
            {
                id: 1,
                title: 'CAACÂèëÂ∏ÉÊúÄÊñ∞Êó†‰∫∫Êú∫ÁÆ°ÁêÜËßÑÂÆö',
                summary: '‰∏≠ÂõΩÊ∞ëÁî®Ëà™Á©∫Â±ÄËøëÊó•ÂèëÂ∏É‰∫ÜÂÖ≥‰∫éÊó†‰∫∫Êú∫È£ûË°åÁÆ°ÁêÜÁöÑÊúÄÊñ∞ËßÑÂÆöÔºåÂØπÊó†‰∫∫Êú∫ÁöÑÊ≥®ÂÜå„ÄÅÈ£ûË°åÁî≥ËØ∑ÊµÅÁ®ãËøõË°å‰∫Ü‰ºòÂåñ...',
                content: '<p>‰∏≠ÂõΩÊ∞ëÁî®Ëà™Á©∫Â±ÄËøëÊó•ÂèëÂ∏É‰∫ÜÂÖ≥‰∫éÊó†‰∫∫Êú∫È£ûË°åÁÆ°ÁêÜÁöÑÊúÄÊñ∞ËßÑÂÆöÔºåÂØπÊó†‰∫∫Êú∫ÁöÑÊ≥®ÂÜå„ÄÅÈ£ûË°åÁî≥ËØ∑ÊµÅÁ®ãËøõË°å‰∫Ü‰ºòÂåñ„ÄÇ</p><p>Êñ∞ËßÑÂÆö‰∏ªË¶ÅÂåÖÊã¨‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢Ôºö</p><p>1. ÁÆÄÂåñ‰∫Ü250ÂÖã‰ª•‰∏ãÂæÆÂûãÊó†‰∫∫Êú∫ÁöÑÊ≥®ÂÜåÊµÅÁ®ã</p><p>2. ‰ºòÂåñ‰∫ÜÈ£ûË°åÁî≥ËØ∑ÂÆ°ÊâπÊó∂ÈôêÔºå‰ªéÂéüÊù•ÁöÑ7‰∏™Â∑•‰ΩúÊó•Áº©Áü≠Ëá≥3‰∏™Â∑•‰ΩúÊó•</p><p>3. Êñ∞Â¢û‰∫Ü‰∏¥Êó∂È£ûË°åËÆ°ÂàíÁî≥Êä•ÂäüËÉΩ</p><p>4. Âä†Âº∫‰∫ÜÂØπËøùËßÑÈ£ûË°åÁöÑÂ§ÑÁΩöÂäõÂ∫¶</p>',
                category: 'ÊîøÁ≠ñÊ≥ïËßÑ',
                date: '2024-12-15',
                author: 'Ê∞ëËà™Â±Ä'
            },
            {
                id: 2,
                title: '2025Âπ¥Êó†‰∫∫Êú∫È©æÈ©∂ÂëòËÄÉËØïÂ§ßÁ∫≤Êõ¥Êñ∞',
                summary: 'Ê†πÊçÆÊúÄÊñ∞ÁöÑË°å‰∏öÂèëÂ±ïÈúÄÊ±ÇÔºå2025Âπ¥Êó†‰∫∫Êú∫È©æÈ©∂ÂëòËÄÉËØïÂ§ßÁ∫≤ËøõË°å‰∫ÜÈáçË¶ÅÊõ¥Êñ∞ÔºåÊñ∞Â¢û‰∫ÜÂüéÂ∏Ç‰ΩéÁ©∫È£ûË°åÁõ∏ÂÖ≥ÂÜÖÂÆπ...',
                content: '<p>2025Âπ¥Êó†‰∫∫Êú∫È©æÈ©∂ÂëòËÄÉËØïÂ§ßÁ∫≤ÁöÑ‰∏ªË¶ÅÂèòÂåñÔºö</p><p>1. Êñ∞Â¢ûÂüéÂ∏Ç‰ΩéÁ©∫È£ûË°åÁÆ°ÁêÜÁ´†ËäÇ</p><p>2. Âº∫Âåñ‰∫ÜÂ∫îÊÄ•Â§ÑÁΩÆËÉΩÂäõËÄÉÊ†∏</p><p>3. Â¢ûÂä†‰∫Ü5GÁΩëËÅîÊó†‰∫∫Êú∫Áõ∏ÂÖ≥Áü•ËØÜ</p><p>4. ÂÆûÊìçËÄÉËØïÊñ∞Â¢ûÂ§úÈó¥È£ûË°åÁßëÁõÆ</p>',
                category: 'ËÄÉËØïÂä®ÊÄÅ',
                date: '2024-12-14',
                author: 'ËÄÉËØï‰∏≠ÂøÉ'
            },
            {
                id: 3,
                title: 'Êó†‰∫∫Êú∫Ë°å‰∏öÂ∞±‰∏öÂâçÊôØÂàÜÊûêÊä•Âëä',
                summary: 'ÊúÄÊñ∞Ë∞ÉÁ†îÊòæÁ§∫ÔºåÊó†‰∫∫Êú∫Ë°å‰∏ö‰∫∫ÊâçÈúÄÊ±ÇÊåÅÁª≠Â¢ûÈïøÔºåÈ¢ÑËÆ°2025Âπ¥Áõ∏ÂÖ≥Â≤ó‰ΩçÂ∞ÜÂ¢ûÂä†30%‰ª•‰∏ä...',
                content: '<p>Ê†πÊçÆË°å‰∏öÂçè‰ºöÊúÄÊñ∞ÂèëÂ∏ÉÁöÑÂ∞±‰∏öÂàÜÊûêÊä•ÂëäÔºö</p><p>1. Êó†‰∫∫Êú∫È£ûÊâãÂπ≥ÂùáËñ™ËµÑËææÂà∞8000-15000ÂÖÉ/Êúà</p><p>2. ÊïôÂëòÁ∫ßÈ£ûÊâãÊõ¥ÊòØ‰æõ‰∏çÂ∫îÊ±ÇÔºåÊúàËñ™ÂèØËææ20000ÂÖÉ‰ª•‰∏ä</p><p>3. ‰∏ªË¶ÅÂ∞±‰∏öÈ¢ÜÂüüÂåÖÊã¨ÔºöËà™Êãç„ÄÅÊµãÁªò„ÄÅÂÜú‰∏öÊ§ç‰øù„ÄÅÁîµÂäõÂ∑°Ê£ÄÁ≠â</p>',
                category: 'Ë°å‰∏öËµÑËÆØ',
                date: '2024-12-13',
                author: 'Ë°å‰∏öÂçè‰ºö'
            },
            {
                id: 4,
                title: '‰ΩéÁ©∫ÁªèÊµéÂèëÂ±ïËßÑÂàíÂèëÂ∏É',
                summary: 'ÂõΩÂÆ∂ÂèëÊîπÂßîÂèëÂ∏É„Ää‰ΩéÁ©∫ÁªèÊµéÂèëÂ±ï‰∏âÂπ¥Ë°åÂä®ËÆ°Âàí„ÄãÔºåÊòéÁ°Æ‰∫ÜÊú™Êù•‰∏âÂπ¥‰ΩéÁ©∫ÁªèÊµéÂèëÂ±ïÁöÑÈáçÁÇπÊñπÂêë...',
                content: '<p>Ë°åÂä®ËÆ°Âàí‰∏ªË¶ÅÂÜÖÂÆπÔºö</p><p>1. Âª∫ËÆæ100‰∏™‰ΩéÁ©∫ÁªèÊµéÁ§∫ËåÉÂå∫</p><p>2. ÂüπËÇ≤1000ÂÆ∂‰ΩéÁ©∫ÁªèÊµéÁõ∏ÂÖ≥‰ºÅ‰∏ö</p><p>3. ÂàõÈÄ†100‰∏á‰∏™Â∞±‰∏öÂ≤ó‰Ωç</p><p>4. Âà∞2027Âπ¥Ôºå‰ΩéÁ©∫ÁªèÊµé‰∫ßÂÄºÁ™ÅÁ†¥‰∏á‰∫øÂÖÉ</p>',
                category: 'ÊîøÁ≠ñÊ≥ïËßÑ',
                date: '2024-12-12',
                author: 'ÂèëÊîπÂßî'
            }
        ];

        // Á´†ËäÇÊï∞ÊçÆ
        const chaptersData = [
            {
                id: 1,
                title: 'Á¨¨‰∏ÄÁ´†ÔºöÊó†‰∫∫Êú∫Âü∫Á°ÄÁü•ËØÜ',
                desc: '‰∫ÜËß£Êó†‰∫∫Êú∫ÁöÑÂü∫Êú¨ÊûÑÈÄ†„ÄÅÂàÜÁ±ªÂíåÂ∑•‰ΩúÂéüÁêÜ',
                total: 150,
                completed: 45,
                questions: []
            },
            {
                id: 2,
                title: 'Á¨¨‰∫åÁ´†ÔºöËà™Á©∫Ê≥ïËßÑ',
                desc: 'Â≠¶‰π†Êó†‰∫∫Êú∫Áõ∏ÂÖ≥ÁöÑÊ≥ïÂæãÊ≥ïËßÑÂíåÁÆ°ÁêÜËßÑÂÆö',
                total: 200,
                completed: 120,
                questions: []
            },
            {
                id: 3,
                title: 'Á¨¨‰∏âÁ´†ÔºöÊ∞îË±°Áü•ËØÜ',
                desc: 'ÊéåÊè°ÂΩ±ÂìçÈ£ûË°åÁöÑÊ∞îË±°Âõ†Á¥†ÂíåÂ§©Ê∞îÂà§Êñ≠',
                total: 100,
                completed: 30,
                questions: []
            },
            {
                id: 4,
                title: 'Á¨¨ÂõõÁ´†ÔºöÈ£ûË°åÂéüÁêÜ',
                desc: 'Ê∑±ÂÖ•ÁêÜËß£Êó†‰∫∫Êú∫ÁöÑÈ£ûË°åÂéüÁêÜÂíåÊìçÊéßÊäÄÊúØ',
                total: 180,
                completed: 90,
                questions: []
            },
            {
                id: 5,
                title: 'Á¨¨‰∫îÁ´†ÔºöÁ¥ßÊÄ•Â§ÑÁΩÆ',
                desc: 'Â≠¶‰π†ÂêÑÁßçÁ¥ßÊÄ•ÊÉÖÂÜµÁöÑÂ§ÑÁêÜÊñπÊ≥ïÂíåÂ∫îÊÄ•Á®ãÂ∫è',
                total: 120,
                completed: 60,
                questions: []
            }
        ];

        // È¢òÂ∫ìÈÖçÁΩÆÔºàÊ†πÊçÆÊâßÁÖßÁ±ªÂûãÂèòÂåñÔºâ
        const questionBanks = {
            'ËßÜË∑ùÂÜÖÈ©æÈ©∂Âëò': { total: 1127, chapters: 12 },
            'Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò': { total: 0, chapters: 0 },  // Ê∏ÖÁ©∫Ë∂ÖËßÜË∑ùÈ©æÈ©∂ÂëòÈ¢òÂ∫ì
            'ÊïôÂëò': { total: 1127, chapters: 12 }
        };

        // ÂÆûÈôÖÈ¢òÂ∫ìÊï∞ÊçÆÔºà‰ªéÊñá‰ª∂ÂØºÂÖ•ÁöÑÈ¢òÁõÆÔºâ
        const questionDatabase = {
            'ËßÜË∑ùÂÜÖÈ©æÈ©∂Âëò': [
                {
                    id: 1,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Êó†‰∫∫Êú∫‰∫ëÁ≥ªÁªüÁöÑ‰∏ªË¶ÅÂäüËÉΩ‰∏çÂåÖÊã¨Ôºü',
                    options: {
                        'A': 'ÁõëËßÜÂäüËÉΩ',
                        'B': 'ÈÄö‰ø°ÂäüËÉΩ',
                        'C': 'ÂØºËà™ÂäüËÉΩ', 
                        'D': 'Ëá™Âä®È©æÈ©∂ÂäüËÉΩ'
                    },
                    answer: 'D',
                    chapter: 1
                },
                {
                    id: 2,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Ê†πÊçÆCAACËßÑÂÆöÔºåÊìçÊéßÊó†‰∫∫Êú∫Â∫îÂΩìÁ°Æ‰øùËØ•Êó†‰∫∫Êú∫Âú®ÂÖ∂ËßÜË∑ùËåÉÂõ¥ÂÜÖÈ£ûË°åÔºåÂÖ∂‰∏≠ËßÜË∑ùÂÜÖÈ£ûË°åÊòØÊåáÔºü',
                    options: {
                        'A': 'È£ûË°åËåÉÂõ¥500Á±≥‰ª•ÂÜÖ',
                        'B': 'È£ûË°åÈ´òÂ∫¶120Á±≥‰ª•‰∏ã',
                        'C': 'È©æÈ©∂ÂëòÊàñËßÇÂØüÂëò‰∏éÊó†‰∫∫Êú∫‰øùÊåÅÁõ¥Êé•ÁõÆËßÜÊé•Ëß¶',
                        'D': 'ÈÄöËøáÊëÑÂÉèÂ§¥ËßÇÂØü'
                    },
                    answer: 'C',
                    chapter: 1
                },
                {
                    id: 3,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Ê∞ëÁî®Êó†‰∫∫Êú∫È©æÈ©∂ÂëòÂêàÊ†ºËØÅÁöÑÊúâÊïàÊúüÊòØÔºü',
                    options: {
                        'A': '1Âπ¥',
                        'B': '2Âπ¥',
                        'C': '3Âπ¥',
                        'D': '5Âπ¥'
                    },
                    answer: 'B',
                    chapter: 1
                },
                {
                    id: 4,
                    type: 'Âà§Êñ≠È¢ò',
                    question: 'Êó†‰∫∫Êú∫È©æÈ©∂ÂëòÊâßÁÖßËøáÊúüÂêé‰∏çËÉΩÁªßÁª≠È£ûË°å„ÄÇ',
                    answer: 'Ê≠£Á°Æ',
                    chapter: 1
                },
                {
                    id: 5,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'ËΩªÂûãÊó†‰∫∫Êú∫ÊòØÊåáËµ∑È£ûÈáçÈáè‰∏çË∂ÖËøáÔºü',
                    options: {
                        'A': '7ÂçÉÂÖã',
                        'B': '15ÂçÉÂÖã',
                        'C': '25ÂçÉÂÖã',
                        'D': '116ÂçÉÂÖã'
                    },
                    answer: 'A',
                    chapter: 2
                },
                {
                    id: 6,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Â∞èÂûãÊó†‰∫∫Êú∫ÊòØÊåáËµ∑È£ûÈáçÈáèÂ§ß‰∫é7ÂçÉÂÖãÔºå‰ΩÜ‰∏çË∂ÖËøáÔºü',
                    options: {
                        'A': '15ÂçÉÂÖã',
                        'B': '25ÂçÉÂÖã',
                        'C': '116ÂçÉÂÖã',
                        'D': '5700ÂçÉÂÖã'
                    },
                    answer: 'C',
                    chapter: 2
                },
                {
                    id: 7,
                    type: 'Â§öÈÄâÈ¢ò',
                    question: '‰ª•‰∏ãÂì™‰∫õÂå∫ÂüüÂ±û‰∫éÊó†‰∫∫Êú∫Á¶ÅÈ£ûÂå∫Ôºü',
                    options: {
                        'A': 'Êú∫Âú∫ÂáÄÁ©∫‰øùÊä§Âå∫',
                        'B': 'ÂÜõ‰∫ãÁÆ°ÁêÜÂå∫',
                        'C': '‰∫∫Âè£Á®†ÂØÜÂå∫',
                        'D': 'ÈáçË¶ÅÁõÆÊ†áÂë®Ëæπ'
                    },
                    answer: 'ABCD',
                    chapter: 3
                },
                {
                    id: 8,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Êó†‰∫∫Êú∫Âú®ËûçÂêàÁ©∫ÂüüÈ£ûË°åÈúÄË¶ÅÔºü',
                    options: {
                        'A': 'Áî≥ËØ∑È£ûË°åËÆ°Âàí',
                        'B': 'ÈöèÊÑèÈ£ûË°å',
                        'C': 'Âè™ÈúÄË¶ÅÈ©æÈ©∂ÂëòÊâßÁÖß',
                        'D': '‰∏çÈúÄË¶Å‰ªª‰ΩïÊâãÁª≠'
                    },
                    answer: 'A',
                    chapter: 3
                },
                {
                    id: 9,
                    type: 'Âà§Êñ≠È¢ò',
                    question: 'ÈöîÁ¶ªÁ©∫ÂüüÊòØ‰∏ìÈó®ÂàÜÈÖçÁªôÊó†‰∫∫Êú∫È£ûË°åÁöÑÁ©∫Âüü„ÄÇ',
                    answer: 'Ê≠£Á°Æ',
                    chapter: 3
                },
                {
                    id: 10,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Ê§ç‰øùÊó†‰∫∫Êú∫‰Ωú‰∏öÊó∂ÁöÑÈ£ûË°åÈ´òÂ∫¶‰∏ÄËà¨‰∏∫Ôºü',
                    options: {
                        'A': '1-3Á±≥',
                        'B': '5-10Á±≥',
                        'C': '10-20Á±≥',
                        'D': '20-50Á±≥'
                    },
                    answer: 'A',
                    chapter: 4
                }
            ],
            'Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò': [],  // Ê∏ÖÁ©∫È¢òÂ∫ì
            'ÊïôÂëò': [
                // ÊïôÂëòÈ¢òÂ∫ìÂåÖÂê´‰∏éËßÜË∑ùÂÜÖÈ©æÈ©∂ÂëòÁõ∏ÂêåÁöÑÂü∫Á°ÄÈ¢òÁõÆÔºåÂä†‰∏äÊïôÂ≠¶Áõ∏ÂÖ≥È¢òÁõÆ
                {
                    id: 1,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Êó†‰∫∫Êú∫‰∫ëÁ≥ªÁªüÁöÑ‰∏ªË¶ÅÂäüËÉΩ‰∏çÂåÖÊã¨Ôºü',
                    options: {
                        'A': 'ÁõëËßÜÂäüËÉΩ',
                        'B': 'ÈÄö‰ø°ÂäüËÉΩ',
                        'C': 'ÂØºËà™ÂäüËÉΩ', 
                        'D': 'Ëá™Âä®È©æÈ©∂ÂäüËÉΩ'
                    },
                    answer: 'D',
                    chapter: 1
                },
                {
                    id: 2,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Ê†πÊçÆCAACËßÑÂÆöÔºåÊìçÊéßÊó†‰∫∫Êú∫Â∫îÂΩìÁ°Æ‰øùËØ•Êó†‰∫∫Êú∫Âú®ÂÖ∂ËßÜË∑ùËåÉÂõ¥ÂÜÖÈ£ûË°åÔºåÂÖ∂‰∏≠ËßÜË∑ùÂÜÖÈ£ûË°åÊòØÊåáÔºü',
                    options: {
                        'A': 'È£ûË°åËåÉÂõ¥500Á±≥‰ª•ÂÜÖ',
                        'B': 'È£ûË°åÈ´òÂ∫¶120Á±≥‰ª•‰∏ã',
                        'C': 'È©æÈ©∂ÂëòÊàñËßÇÂØüÂëò‰∏éÊó†‰∫∫Êú∫‰øùÊåÅÁõ¥Êé•ÁõÆËßÜÊé•Ëß¶',
                        'D': 'ÈÄöËøáÊëÑÂÉèÂ§¥ËßÇÂØü'
                    },
                    answer: 'C',
                    chapter: 1
                },
                {
                    id: 3,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Ê∞ëÁî®Êó†‰∫∫Êú∫È©æÈ©∂ÂëòÂêàÊ†ºËØÅÁöÑÊúâÊïàÊúüÊòØÔºü',
                    options: {
                        'A': '1Âπ¥',
                        'B': '2Âπ¥',
                        'C': '3Âπ¥',
                        'D': '5Âπ¥'
                    },
                    answer: 'B',
                    chapter: 1
                },
                {
                    id: 101,
                    type: 'ÂçïÈÄâÈ¢ò',
                    question: 'Êó†‰∫∫Êú∫ÊïôÂëòÂ∫îÂÖ∑Â§áÁöÑÊúÄÂ∞ëÈ£ûË°åÁªèÂéÜÊó∂Èó¥‰∏∫Ôºü',
                    options: {
                        'A': '50Â∞èÊó∂',
                        'B': '100Â∞èÊó∂',
                        'C': '150Â∞èÊó∂',
                        'D': '200Â∞èÊó∂'
                    },
                    answer: 'B',
                    chapter: 11
                },
                {
                    id: 102,
                    type: 'Â§öÈÄâÈ¢ò',
                    question: 'Êó†‰∫∫Êú∫ÊïôÂëòÁöÑËÅåË¥£ÂåÖÊã¨Ôºü',
                    options: {
                        'A': 'ÁêÜËÆ∫ÊïôÂ≠¶',
                        'B': 'ÂÆûË∑µÈ£ûË°åÊåáÂØº',
                        'C': 'ÂÆâÂÖ®ÁõëÁù£',
                        'D': 'ËÄÉÊ†∏ËØÑ‰º∞'
                    },
                    answer: 'ABCD',
                    chapter: 11
                },
                {
                    id: 103,
                    type: 'Âà§Êñ≠È¢ò',
                    question: 'Êó†‰∫∫Êú∫ÊïôÂëòÂèØ‰ª•ÂêåÊó∂ÊåáÂØºÂ§öÂêçÂ≠¶ÂëòËøõË°åÂÆûË∑µÈ£ûË°å„ÄÇ',
                    answer: 'ÈîôËØØ',
                    chapter: 11
                }
            ]
        };

        // Ê®°ÊãüÈ¢òÂ∫ìÊï∞ÊçÆÔºàÁî®‰∫éÈó™Âç°ËÆ∞ÂøÜÔºâ
        const flashcardQuestions = [
            {
                id: 1,
                type: 'ÂçïÈÄâÈ¢ò',
                question: 'Êó†‰∫∫Êú∫‰∫ëÁ≥ªÁªüÁöÑ‰∏ªË¶ÅÂäüËÉΩ‰∏çÂåÖÊã¨Ôºü',
                answer: 'D. Ëá™Âä®È©æÈ©∂ÂäüËÉΩ'
            },
            {
                id: 2,
                type: 'ÂçïÈÄâÈ¢ò',
                question: 'ËßÜË∑ùÂÜÖÈ£ûË°åÊòØÊåáÔºü',
                answer: 'C. È©æÈ©∂ÂëòÊàñËßÇÂØüÂëò‰∏éÊó†‰∫∫Êú∫‰øùÊåÅÁõ¥Êé•ÁõÆËßÜÊé•Ëß¶'
            },
            {
                id: 3,
                type: 'Âà§Êñ≠È¢ò',
                question: 'Ê∞ëÁî®Êó†‰∫∫Êú∫È©æÈ©∂ÂëòÂêàÊ†ºËØÅÁöÑÊúâÊïàÊúüÊòØ2Âπ¥',
                answer: 'Ê≠£Á°Æ'
            },
            {
                id: 4,
                type: 'ÂçïÈÄâÈ¢ò',
                question: 'ËΩªÂûãÊó†‰∫∫Êú∫ÊòØÊåáËµ∑È£ûÈáçÈáè‰∏çË∂ÖËøáÔºü',
                answer: 'A. 7ÂçÉÂÖã'
            },
            {
                id: 5,
                type: 'Â§öÈÄâÈ¢ò',
                question: 'Âì™‰∫õÂå∫ÂüüÂ±û‰∫éÊó†‰∫∫Êú∫Á¶ÅÈ£ûÂå∫Ôºü',
                answer: 'A.Êú∫Âú∫ÂáÄÁ©∫‰øùÊä§Âå∫ B.ÂÜõ‰∫ãÁÆ°ÁêÜÂå∫ C.‰∫∫Âè£Á®†ÂØÜÂå∫ D.ÈáçË¶ÅÁõÆÊ†áÂë®Ëæπ'
            }
        ];

        // ÊâßÁÖßÁ±ªÂûãÈÄâÊã©
        function toggleLicenseDropdown() {
            const dropdown = document.getElementById('licenseDropdown');
            dropdown.classList.toggle('active');
        }

        function selectLicense(type) {
            currentLicenseType = type;
            document.getElementById('currentLicense').textContent = type;
            document.getElementById('profileLicenseType').textContent = type;
            document.getElementById('licenseDropdown').classList.remove('active');
            
            // Êõ¥Êñ∞È¢òÂ∫ìÊï∞Èáè
            updateQuestionBank(type);
            
            // ‰øùÂ≠òÂà∞Áî®Êà∑‰ø°ÊÅØ
            if (currentUser) {
                currentUser.licenseType = type;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
            
            // ‰øùÂ≠òÈÄâÊã©
            localStorage.setItem('licenseType', type);
        }

        function updateQuestionBank(type) {
            const bank = questionBanks[type];
            if (!bank) {
                console.warn(`Êú™ÊâæÂà∞ ${type} ÁöÑÈ¢òÂ∫ìÈÖçÁΩÆ`);
                return;
            }
            
            const practiceCount = document.querySelector('.practice-count');
            if (practiceCount) {
                practiceCount.textContent = `0/${bank.total}`;
            }
            
            // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†Êõ¥Â§öÊõ¥Êñ∞ÈÄªËæëÔºåÂ¶ÇÊõ¥Êñ∞Êìç‰ΩúËßÜÈ¢ëÁ≠â
            console.log(`ÂàáÊç¢Âà∞${type}ÔºåÈ¢òÂ∫ìÊÄªÊï∞Ôºö${bank.total}`);
        }

        // È¢úËâ≤‰∏ªÈ¢òÈÄâÊã©
        function toggleColorPicker() {
            const panel = document.getElementById('colorPickerPanel');
            panel.classList.toggle('active');
        }

        function changeThemeColor(color) {
            document.body.setAttribute('data-theme', color);
            localStorage.setItem('themeColor', color);
        }

        function toggleDarkMode() {
            const body = document.body;
            const themeSwitch = document.getElementById('themeSwitch');
            const slider = themeSwitch.querySelector('.theme-switch-slider');
            
            body.classList.toggle('dark-mode');
            themeSwitch.classList.toggle('active');
            
            if (body.classList.contains('dark-mode')) {
                slider.textContent = 'üåô';
                localStorage.setItem('darkMode', 'true');
            } else {
                slider.textContent = '‚òÄÔ∏è';
                localStorage.setItem('darkMode', 'false');
            }
        }

        // Áè≠Á∫ßÂäüËÉΩ
        function joinClass() {
            const classCode = document.getElementById('classCode').value.toUpperCase();
            
            if (!classCode) {
                alert('ËØ∑ËæìÂÖ•Áè≠Á∫ßÂè∑');
                return;
            }
            
            const classData = classDatabase[classCode];
            
            if (classData) {
                currentClass = classData;
                
                // ÊòæÁ§∫Áè≠Á∫ß‰ø°ÊÅØ
                document.getElementById('className').textContent = classData.name;
                document.getElementById('classLicense').textContent = classData.licenseType;
                document.getElementById('classCount').textContent = classData.count + '‰∫∫';
                document.getElementById('classTeacher').textContent = classData.teacher;
                document.getElementById('classInfo').classList.add('active');
                
                // Ëá™Âä®ÂàáÊç¢Âà∞Áè≠Á∫ßÊåáÂÆöÁöÑÊâßÁÖßÁ±ªÂûã
                selectLicense(classData.licenseType);
                
                // ‰øùÂ≠òÁè≠Á∫ß‰ø°ÊÅØ
                localStorage.setItem('currentClass', JSON.stringify(classData));
                
                alert(`ÊàêÂäüÂä†ÂÖ•${classData.name}ÔºÅ\nÂ∑≤Ëá™Âä®ÂàáÊç¢Âà∞${classData.licenseType}È¢òÂ∫ì`);
                
                // ÂàáÊç¢Âà∞ÁªÉ‰π†È°µÈù¢
                switchPage('practice');
            } else {
                alert('Áè≠Á∫ßÂè∑‰∏çÂ≠òÂú®ÔºåËØ∑Ê£ÄÊü•ÂêéÈáçËØï');
            }
        }

        // ËÄÉËØïËÆ∞ÂΩïÂäüËÉΩ
        function showExamRecords() {
            const examSection = document.getElementById('examSection');
            const recordsSection = document.getElementById('examRecords');
            
            examSection.style.display = 'none';
            recordsSection.style.display = 'block';
            
            renderExamRecords();
        }

        function renderExamRecords() {
            const recordsList = document.getElementById('recordsList');
            
            // ÂêàÂπ∂ËøõË°å‰∏≠ÁöÑËÄÉËØïÂíåÂ∑≤ÂÆåÊàêÁöÑËÄÉËØï
            const allRecords = [
                ...ongoingExams.map(e => ({...e, status: 'ongoing'})),
                ...examRecords.map(e => ({...e, status: 'completed'}))
            ];
            
            if (allRecords.length === 0) {
                recordsList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-tertiary);">ÊöÇÊó†ËÄÉËØïËÆ∞ÂΩï</div>';
                return;
            }
            
            recordsList.innerHTML = allRecords.map(record => `
                <div class="record-card" onclick="viewExamDetail('${record.id}', '${record.status}')">
                    <div class="record-header">
                        <div>
                            <span class="record-title">${getExamTypeName(record.type)}</span>
                            <span class="record-status ${record.status}">${record.status === 'ongoing' ? 'ËøõË°å‰∏≠' : 'Â∑≤ÂÆåÊàê'}</span>
                        </div>
                        ${record.status === 'completed' ? `
                            <div class="record-score ${record.passed ? 'pass' : 'fail'}">
                                ${record.score}ÂàÜ
                            </div>
                        ` : `
                            <button onclick="event.stopPropagation(); continueExam('${record.id}')" style="padding: 6px 12px; background: var(--warning-color); color: white; border: none; border-radius: 6px; cursor: pointer;">ÁªßÁª≠Á≠îÈ¢ò</button>
                        `}
                    </div>
                    <div style="color: var(--text-secondary); font-size: 14px; margin-top: 10px;">
                        <span>üìÖ ${record.date}</span>
                        ${record.status === 'completed' ? `
                            <span style="margin-left: 15px;">‚úÖ ${record.correctCount}/${record.totalCount}</span>
                        ` : `
                            <span style="margin-left: 15px;">‚è±Ô∏è Ââ©‰ΩôÊó∂Èó¥Ôºö${getTimeRemaining(record.endTime)}</span>
                        `}
                    </div>
                </div>
            `).join('');
        }

        function getExamTypeName(type) {
            const typeNames = {
                'timed': 'ÈôêÊó∂ËÄÉËØï',
                'real': 'ÂÖ®ÁúüÊ®°Êãü',
                'chapter': 'Á´†ËäÇËØïÁÇº'
            };
            return typeNames[type] || 'Êú™Áü•Á±ªÂûã';
        }

        function getTimeRemaining(endTime) {
            const now = Date.now();
            const remaining = endTime - now;
            
            if (remaining <= 0) return 'Â∑≤ËøáÊúü';
            
            const minutes = Math.floor(remaining / 1000 / 60);
            const hours = Math.floor(minutes / 60);
            
            if (hours > 0) {
                return `${hours}Â∞èÊó∂${minutes % 60}ÂàÜÈíü`;
            }
            return `${minutes}ÂàÜÈíü`;
        }

        function viewExamDetail(examId, status) {
            if (status === 'ongoing') {
                continueExam(examId);
            } else {
                showPaperDetail(examId);
            }
        }

        function continueExam(examId) {
            const exam = ongoingExams.find(e => e.id === examId);
            if (exam) {
                if (Date.now() > exam.endTime) {
                    alert('ËÄÉËØïÊó∂Èó¥Â∑≤ËøáÊúü');
                    // ÁßªÈô§ËøáÊúüÁöÑËÄÉËØï
                    ongoingExams = ongoingExams.filter(e => e.id !== examId);
                    localStorage.setItem('ongoingExams', JSON.stringify(ongoingExams));
                    renderExamRecords();
                } else {
                    alert('ÁªßÁª≠ËÄÉËØïÂäüËÉΩÂºÄÂèë‰∏≠...');
                    // ËøôÈáåÂ∫îËØ•Ë∑≥ËΩ¨Âà∞ËÄÉËØïÁ≠îÈ¢òÈ°µÈù¢
                }
            }
        }

        function showPaperDetail(examId) {
            const record = examRecords.find(r => r.id === examId);
            if (!record) return;
            
            document.getElementById('examRecords').style.display = 'none';
            document.getElementById('paperDetail').style.display = 'block';
            
            document.getElementById('paperScore').textContent = record.score + 'ÂàÜ';
            document.getElementById('paperAccuracy').textContent = Math.round((record.correctCount / record.totalCount) * 100) + '%';
            document.getElementById('paperWrong').textContent = (record.totalCount - record.correctCount) + 'È¢ò';
            
            // ËøôÈáåÂèØ‰ª•ÊòæÁ§∫ÂÖ∑‰ΩìÁöÑÈ¢òÁõÆÂíåÁ≠îÊ°à
            document.getElementById('paperQuestions').innerHTML = '<div style="padding: 20px; text-align: center; color: var(--text-secondary);">ËØ¶ÁªÜËØïÈ¢òÂÜÖÂÆπÂºÄÂèë‰∏≠...</div>';
        }

        function backToExam() {
            document.getElementById('examRecords').style.display = 'none';
            document.getElementById('examSection').style.display = 'block';
        }

        function backToRecords() {
            document.getElementById('paperDetail').style.display = 'none';
            document.getElementById('examRecords').style.display = 'block';
        }

        // È°µÈù¢ÂàáÊç¢
        function switchPage(page) {
            // ÈöêËóèÊâÄÊúâÈ°µÈù¢
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('examSection').style.display = 'none';
            document.getElementById('examRecords').style.display = 'none';
            document.getElementById('paperDetail').style.display = 'none';
            document.getElementById('classSection').style.display = 'none';
            document.getElementById('operationSection').style.display = 'none';
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('checkinSection').style.display = 'none';
            document.getElementById('statisticsSection').style.display = 'none';
            document.getElementById('flashcardSection').style.display = 'none';
            document.getElementById('chapterSection').style.display = 'none';
            document.getElementById('mistakesSection').style.display = 'none';
            document.getElementById('favoritesSection').style.display = 'none';
            document.getElementById('newsSection').style.display = 'none';
            document.getElementById('newsDetail').style.display = 'none';
            
            // Êõ¥Êñ∞ÂØºËà™Ê†èÁä∂ÊÄÅ
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === page) {
                    item.classList.add('active');
                }
            });
            
            // ÊòæÁ§∫ÂØπÂ∫îÈ°µÈù¢
            switch(page) {
                case 'practice':
                    document.getElementById('mainContent').style.display = 'block';
                    break;
                case 'exam':
                    document.getElementById('examSection').style.display = 'block';
                    checkOngoingExams();
                    break;
                case 'operation':
                    document.getElementById('operationSection').style.display = 'block';
                    break;
                case 'class':
                    document.getElementById('classSection').style.display = 'block';
                    break;
                case 'profile':
                    document.getElementById('profileSection').style.display = 'block';
                    checkLoginStatus();
                    break;
            }
        }

        // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ
        function checkLoginStatus() {
            const user = localStorage.getItem('currentUser');
            if (user) {
                currentUser = JSON.parse(user);
                // Â∑≤ÁôªÂΩïÁä∂ÊÄÅ
                document.getElementById('profileAvatar').textContent = 'üòä';
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileIdDiv').style.display = 'block';
                document.getElementById('profileId').textContent = currentUser.id || '100001';
                document.getElementById('loginHint').style.display = 'none';
                document.getElementById('logoutItem').style.display = 'block';
                
                // ÊÅ¢Â§çÊâßÁÖßÁ±ªÂûã
                if (currentUser.licenseType) {
                    selectLicense(currentUser.licenseType);
                }
            } else {
                // Êú™ÁôªÂΩïÁä∂ÊÄÅ
                document.getElementById('profileAvatar').textContent = 'üë§';
                document.getElementById('profileName').textContent = 'Êú™ÁôªÂΩï';
                document.getElementById('profileIdDiv').style.display = 'none';
                document.getElementById('loginHint').style.display = 'block';
                document.getElementById('loginHint').textContent = 'ÁÇπÂáªÁôªÂΩïË¥¶Âè∑';
                document.getElementById('logoutItem').style.display = 'none';
            }
        }

        // ÊòæÁ§∫ÁôªÂΩïÊ®°ÊÄÅÊ°Ü
        function showLoginModal() {
            // Â¶ÇÊûúÂ∑≤ÁôªÂΩïÔºåÁÇπÂáªÂ§¥ÂÉè‰∏çÂºπÂá∫ÁôªÂΩïÊ°Ü
            if (currentUser && event.currentTarget.className === 'profile-header') {
                return;
            }
            document.getElementById('loginModal').classList.add('active');
        }

        // ÂÖ≥Èó≠ÁôªÂΩïÊ®°ÊÄÅÊ°Ü
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('modalUsername').value = '';
            document.getElementById('modalPassword').value = '';
        }

        // ÁôªÂΩïÂäüËÉΩ
        function handleLogin() {
            const username = document.getElementById('modalUsername').value;
            const password = document.getElementById('modalPassword').value;
            
            if (!username || !password) {
                alert('ËØ∑ËæìÂÖ•Áî®Êà∑ÂêçÂíåÂØÜÁ†Å');
                return;
            }
            
            // Ê®°ÊãüÁôªÂΩïÊàêÂäü
            currentUser = {
                id: Date.now(),
                name: username,
                licenseType: currentLicenseType
            };
            
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            checkLoginStatus();
            closeLoginModal();
            
            alert('ÁôªÂΩïÊàêÂäüÔºÅ');
        }

        // ÈÄÄÂá∫ÁôªÂΩï
        function handleLogout() {
            if (confirm('Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü')) {
                localStorage.removeItem('currentUser');
                currentUser = null;
                checkLoginStatus();
            }
        }

        // ÊâìÂç°ÂäüËÉΩ
        function showCheckin() {
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('checkinSection').style.display = 'block';
            
            initCalendar();
            checkTodayCheckin();
        }

        function doCheckin() {
            if (!currentUser) {
                if (confirm('ÊÇ®ËøòÊú™ÁôªÂΩïÔºåÊòØÂê¶Á´ãÂç≥ÁôªÂΩïÔºü')) {
                    showLoginModal();
                }
                return;
            }
            
            const today = new Date().toDateString();
            const userCheckinKey = `checkin_${currentUser.id}_${today}`;
            
            if (localStorage.getItem(userCheckinKey)) {
                alert('‰ªäÂ§©Â∑≤ÁªèÊâìËøáÂç°‰∫ÜÔºÅ');
                return;
            }
            
            localStorage.setItem(userCheckinKey, 'true');
            checkinData[today] = true;
            localStorage.setItem('checkinData', JSON.stringify(checkinData));
            
            document.getElementById('checkinBtn').classList.add('checked');
            document.getElementById('checkinStatus').textContent = '‰ªäÊó•Â∑≤ÊâìÂç°';
            
            initCalendar();
            alert('ÊâìÂç°ÊàêÂäüÔºÅ');
        }

        function checkTodayCheckin() {
            const today = new Date().toDateString();
            
            if (currentUser) {
                const userCheckinKey = `checkin_${currentUser.id}_${today}`;
                if (localStorage.getItem(userCheckinKey)) {
                    document.getElementById('checkinBtn').classList.add('checked');
                    document.getElementById('checkinStatus').textContent = '‰ªäÊó•Â∑≤ÊâìÂç°';
                } else {
                    document.getElementById('checkinBtn').classList.remove('checked');
                    document.getElementById('checkinStatus').textContent = '‰ªäÊó•Êú™ÊâìÂç°';
                }
            } else {
                // Êú™ÁôªÂΩïÊó∂‰ΩøÁî®ÈÄöÁî®ÊâìÂç°Êï∞ÊçÆ
                if (checkinData[today]) {
                    document.getElementById('checkinBtn').classList.add('checked');
                    document.getElementById('checkinStatus').textContent = '‰ªäÊó•Â∑≤ÊâìÂç°';
                } else {
                    document.getElementById('checkinBtn').classList.remove('checked');
                    document.getElementById('checkinStatus').textContent = '‰ªäÊó•Êú™ÊâìÂç°';
                }
            }
        }

        function initCalendar() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            document.getElementById('currentMonth').textContent = `${year}Âπ¥${month + 1}Êúà`;
            
            const grid = document.getElementById('calendarGrid');
            grid.innerHTML = '';
            
            // Ê∑ªÂä†ÊòüÊúüÊ†áÈ¢ò
            const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];
            weekDays.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                dayElement.style.fontWeight = 'bold';
                dayElement.style.color = 'var(--text-primary)';
                grid.appendChild(dayElement);
            });
            
            // Ê∑ªÂä†Á©∫ÁôΩÂ§©Êï∞
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                grid.appendChild(emptyDay);
            }
            
            // Ê∑ªÂä†Êó•Êúü
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                const date = new Date(year, month, day);
                const dateString = date.toDateString();
                
                if (checkinData[dateString]) {
                    dayElement.classList.add('checked');
                }
                
                if (date.toDateString() === new Date().toDateString()) {
                    dayElement.classList.add('today');
                }
                
                grid.appendChild(dayElement);
            }
        }

        // Á≠îÈ¢òÁªüËÆ°ÂäüËÉΩ
        function showStatistics() {
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('statisticsSection').style.display = 'block';
            
            loadStatistics();
        }

        function loadStatistics() {
            // Ê®°Êãü‰ªäÊó•Êï∞ÊçÆ
            const today = new Date().toLocaleDateString();
            const todayData = dailyStats.find(d => d.date === today) || {
                count: Math.floor(Math.random() * 50) + 10,
                correct: Math.floor(Math.random() * 40) + 5
            };
            
            document.getElementById('todayCount').textContent = todayData.count || 0;
            document.getElementById('todayAccuracy').textContent = 
                todayData.count ? Math.round((todayData.correct / todayData.count) * 100) + '%' : '0%';
            
            // ËÆ°ÁÆóÊÄª‰ΩìÊï∞ÊçÆ
            let totalCount = 0;
            let totalCorrect = 0;
            
            dailyStats.forEach(stat => {
                totalCount += stat.count;
                totalCorrect += stat.correct;
            });
            
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('avgAccuracy').textContent = 
                totalCount ? Math.round((totalCorrect / totalCount) * 100) + '%' : '0%';
            
            // ÁîüÊàêÊØèÊó•ËÆ∞ÂΩï
            const recordsList = document.getElementById('dailyRecordsList');
            
            // Ê®°ÊãüÊúÄËøë7Â§©ÁöÑÊï∞ÊçÆ
            const recentDays = [];
            for (let i = 0; i < 7; i++) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toLocaleDateString();
                
                let dayData = dailyStats.find(d => d.date === dateStr);
                if (!dayData && i > 0) {
                    dayData = {
                        date: dateStr,
                        count: Math.floor(Math.random() * 100) + 20,
                        correct: Math.floor(Math.random() * 80) + 15
                    };
                    dailyStats.push(dayData);
                }
                
                if (dayData) {
                    recentDays.push(dayData);
                }
            }
            
            localStorage.setItem('dailyStats', JSON.stringify(dailyStats));
            
            recordsList.innerHTML = recentDays.map(record => `
                <div class="record-item">
                    <div class="record-date">${record.date}</div>
                    <div class="record-stats">
                        <div class="record-count">Á≠îÈ¢ò ${record.count} È¢ò</div>
                        <div class="record-accuracy">Ê≠£Á°ÆÁéá ${Math.round((record.correct / record.count) * 100)}%</div>
                    </div>
                </div>
            `).join('');
        }

        // ÊòæÁ§∫ÊâßÁÖßËÆæÁΩÆ
        function showLicenseSettings() {
            alert('ËØ∑Âú®È°∂ÈÉ®ÈÄâÊã©ÊâßÁÖßÁ±ªÂûãËøõË°åÂàáÊç¢');
        }

        // ËøîÂõû‰∏™‰∫∫‰∏≠ÂøÉ
        function backToProfile() {
            document.getElementById('checkinSection').style.display = 'none';
            document.getElementById('statisticsSection').style.display = 'none';
            document.getElementById('chapterSection').style.display = 'none';
            document.getElementById('newsSection').style.display = 'none';
            document.getElementById('newsDetail').style.display = 'none';
            document.getElementById('profileSection').style.display = 'block';
        }

        // ËµÑËÆØÂäüËÉΩ
        function showNews() {
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('newsSection').style.display = 'block';
            loadNewsList();
        }

        function loadNewsList() {
            const newsList = document.getElementById('newsList');
            
            // Ê®°Êãü‰ªéÂêéÁ´ØËé∑ÂèñËµÑËÆØÊï∞ÊçÆ
            newsList.innerHTML = newsData.map(news => `
                <div class="news-item" onclick="showNewsDetail(${news.id})">
                    <div class="news-header">
                        <div class="news-title">${news.title}</div>
                        <div class="news-date">${news.date}</div>
                    </div>
                    <div class="news-summary">${news.summary}</div>
                    <div class="news-footer">
                        <span class="news-category">${news.category}</span>
                        <span class="news-read-more">ÈòÖËØªÊõ¥Â§ö ‚Üí</span>
                    </div>
                </div>
            `).join('');
        }

        function showNewsDetail(newsId) {
            const news = newsData.find(n => n.id === newsId);
            if (!news) return;
            
            document.getElementById('newsSection').style.display = 'none';
            document.getElementById('newsDetail').style.display = 'block';
            
            document.getElementById('newsDetailTitle').textContent = news.title;
            document.getElementById('newsDetailDate').textContent = news.date;
            document.getElementById('newsDetailCategory').textContent = news.category;
            document.getElementById('newsDetailAuthor').textContent = '‰ΩúËÄÖÔºö' + news.author;
            document.getElementById('newsDetailContent').innerHTML = news.content;
        }

        function backToNewsList() {
            document.getElementById('newsDetail').style.display = 'none';
            document.getElementById('newsSection').style.display = 'block';
        }
        
        // ËøîÂõûÁªÉ‰π†È°µÈù¢
        function backToPractice() {
            document.getElementById('flashcardSection').style.display = 'none';
            document.getElementById('mistakesSection').style.display = 'none';
            document.getElementById('favoritesSection').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        // Èó™Âç°ËÆ∞ÂøÜÂäüËÉΩ
        function showFlashcards() {
            // ÈöêËóèÊâÄÊúâÈ°µÈù¢
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('flashcardSection').style.display = 'block';
            
            currentCardIndex = 0;
            loadFlashcard();
            initFlashcardSwipe();
        }

        function loadFlashcard() {
            if (currentCardIndex >= flashcardQuestions.length) {
                currentCardIndex = 0; // Âæ™ÁéØÊòæÁ§∫
            }
            
            const question = flashcardQuestions[currentCardIndex];
            document.getElementById('cardNumber').textContent = currentCardIndex + 1;
            document.getElementById('flashcardQuestion').textContent = question.question;
            document.getElementById('flashcardAnswer').textContent = question.answer;
            
            // ÈáçÁΩÆÂç°Áâá‰ΩçÁΩÆ
            const card = document.getElementById('currentFlashcard');
            card.classList.remove('swipe-left', 'swipe-right');
            card.style.transform = '';
        }

        function skipCard() {
            const card = document.getElementById('currentFlashcard');
            card.classList.add('swipe-left');
            
            setTimeout(() => {
                currentCardIndex++;
                loadFlashcard();
            }, 300);
        }

        function collectCard() {
            const question = flashcardQuestions[currentCardIndex];
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤Êî∂Ëóè
            const exists = favoriteQuestions.find(q => q.id === question.id);
            if (!exists) {
                favoriteQuestions.push(question);
                localStorage.setItem('favoriteQuestions', JSON.stringify(favoriteQuestions));
                alert('Â∑≤Ê∑ªÂä†Âà∞Êî∂ËóèÂ§πÔºÅ');
            } else {
                alert('ËØ•È¢òÁõÆÂ∑≤Âú®Êî∂ËóèÂ§π‰∏≠ÔºÅ');
            }
            
            const card = document.getElementById('currentFlashcard');
            card.classList.add('swipe-right');
            
            setTimeout(() => {
                currentCardIndex++;
                loadFlashcard();
            }, 300);
        }

        function initFlashcardSwipe() {
            const card = document.getElementById('currentFlashcard');
            let startX = null;
            let currentX = null;
            let cardElem = null;

            // Ëß¶Êë∏‰∫ã‰ª∂
            card.addEventListener('touchstart', handleStart, {passive: true});
            card.addEventListener('touchmove', handleMove, {passive: true});
            card.addEventListener('touchend', handleEnd);
            
            // Èº†Ê†á‰∫ã‰ª∂
            card.addEventListener('mousedown', handleStart);
            card.addEventListener('mousemove', handleMove);
            card.addEventListener('mouseup', handleEnd);
            card.addEventListener('mouseleave', handleEnd);

            function handleStart(e) {
                cardElem = e.currentTarget;
                startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                cardElem.classList.add('dragging');
            }

            function handleMove(e) {
                if (!startX) return;
                
                currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                const diffX = currentX - startX;
                const rotation = diffX * 0.1;
                
                cardElem.style.transform = `translateX(${diffX}px) rotate(${rotation}deg)`;
            }

            function handleEnd(e) {
                if (!startX) return;
                
                const diffX = currentX - startX;
                const threshold = 100;
                
                if (Math.abs(diffX) > threshold) {
                    if (diffX > 0) {
                        collectCard();
                    } else {
                        skipCard();
                    }
                } else {
                    cardElem.style.transform = '';
                }
                
                cardElem.classList.remove('dragging');
                startX = null;
                currentX = null;
            }
        }

        // Á´†ËäÇÂ≠¶‰π†ÂäüËÉΩ
        function showChapters() {
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('chapterSection').style.display = 'block';
            
            loadChapters();
        }

        function loadChapters() {
            const chapterList = document.getElementById('chapterList');
            
            chapterList.innerHTML = chaptersData.map(chapter => {
                const progress = Math.round((chapter.completed / chapter.total) * 100);
                return `
                    <div class="chapter-card" onclick="startChapter(${chapter.id})">
                        <div class="chapter-header">
                            <div class="chapter-title">${chapter.title}</div>
                            <div class="chapter-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progress}%"></div>
                                </div>
                                <span class="chapter-count">${chapter.completed}/${chapter.total}</span>
                            </div>
                        </div>
                        <div class="chapter-desc">${chapter.desc}</div>
                    </div>
                `;
            }).join('');
        }

        function startChapter(chapterId) {
            const chapter = chaptersData.find(c => c.id === chapterId);
            alert(`ÂºÄÂßãÂ≠¶‰π†Ôºö${chapter.title}`);
            // ËøôÈáåÂèØ‰ª•Ë∑≥ËΩ¨Âà∞ÂÖ∑‰ΩìÁöÑÁ´†ËäÇÂ≠¶‰π†È°µÈù¢
        }

        // ÈîôÈ¢òÊú¨ÂäüËÉΩ
        function showMistakes() {
            // ÈöêËóèÊâÄÊúâÈ°µÈù¢
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('mistakesSection').style.display = 'block';
            
            loadMistakes();
        }

        function loadMistakes() {
            const mistakesList = document.getElementById('mistakesList');
            const mistakesCount = document.getElementById('mistakesCount');
            
            // Ê®°Êãü‰∏Ä‰∫õÈîôÈ¢òÊï∞ÊçÆ
            if (mistakeQuestions.length === 0) {
                mistakeQuestions = [
                    {
                        id: 101,
                        question: 'Êó†‰∫∫Êú∫Âú®‰∫∫Âè£ÂØÜÈõÜÂå∫ÂüüÈ£ûË°åÁöÑÊúÄÂ§ßÈ´òÂ∫¶ÊòØÔºü',
                        userAnswer: 'A. 50Á±≥',
                        correctAnswer: 'B. 30Á±≥',
                        date: '2024-12-15'
                    },
                    {
                        id: 102,
                        question: 'Â§úÈó¥È£ûË°åÊó†‰∫∫Êú∫ÈúÄË¶ÅÈÖçÂ§á‰ªÄ‰πàËÆæÂ§áÔºü',
                        userAnswer: 'B. Á∫¢Â§ñÁõ∏Êú∫',
                        correctAnswer: 'C. Èò≤ÊíûÁÅØ',
                        date: '2024-12-14'
                    }
                ];
                localStorage.setItem('mistakeQuestions', JSON.stringify(mistakeQuestions));
            }
            
            mistakesCount.textContent = mistakeQuestions.length;
            
            if (mistakeQuestions.length === 0) {
                mistakesList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-tertiary);">ÊöÇÊó†ÈîôÈ¢òËÆ∞ÂΩï</div>';
            } else {
                mistakesList.innerHTML = mistakeQuestions.map(item => `
                    <div class="mistake-item">
                        <div style="font-size: 16px; color: var(--text-primary); margin-bottom: 10px;">
                            ${item.question}
                        </div>
                        <div style="font-size: 14px; color: var(--error-color); margin-bottom: 5px;">
                            ‰Ω†ÁöÑÁ≠îÊ°àÔºö${item.userAnswer}
                        </div>
                        <div style="font-size: 14px; color: var(--success-color); margin-bottom: 10px;">
                            Ê≠£Á°ÆÁ≠îÊ°àÔºö${item.correctAnswer}
                        </div>
                        <div style="font-size: 12px; color: var(--text-tertiary);">
                            ÈîôÈ¢òÊó•ÊúüÔºö${item.date}
                        </div>
                    </div>
                `).join('');
            }
        }

        // Êî∂ËóèÂ§πÂäüËÉΩ
        function showFavorites() {
            // ÈöêËóèÊâÄÊúâÈ°µÈù¢
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('favoritesSection').style.display = 'block';
            
            loadFavorites();
        }

        function loadFavorites() {
            const favoritesList = document.getElementById('favoritesList');
            const favoritesCount = document.getElementById('favoritesCount');
            
            favoritesCount.textContent = favoriteQuestions.length;
            
            if (favoriteQuestions.length === 0) {
                favoritesList.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-tertiary);">ÊöÇÊó†Êî∂ËóèÈ¢òÁõÆ</div>';
            } else {
                favoritesList.innerHTML = favoriteQuestions.map((item, index) => `
                    <div class="favorite-item">
                        <button class="remove-favorite" onclick="removeFavorite(${index})">√ó</button>
                        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 10px;">
                            ${item.type}
                        </div>
                        <div style="font-size: 16px; color: var(--text-primary); margin-bottom: 15px;">
                            ${item.question}
                        </div>
                        <div style="font-size: 14px; color: var(--primary-color);">
                            Á≠îÊ°àÔºö${item.answer}
                        </div>
                    </div>
                `).join('');
            }
        }

        function removeFavorite(index) {
            if (confirm('Á°ÆÂÆöË¶ÅÁßªÈô§ËøôÈÅìÊî∂ËóèÈ¢òÂêóÔºü')) {
                favoriteQuestions.splice(index, 1);
                localStorage.setItem('favoriteQuestions', JSON.stringify(favoriteQuestions));
                loadFavorites();
            }
        }

        // Â∫ïÈÉ®ÂØºËà™‰∫ã‰ª∂
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                switchPage(this.dataset.page);
            });
        });

        // Ê£ÄÊü•ËøõË°å‰∏≠ÁöÑËÄÉËØï
        function checkOngoingExams() {
            const hasOngoing = ongoingExams.some(e => Date.now() < e.endTime);
            document.getElementById('timedExamBadge').style.display = hasOngoing ? 'inline-block' : 'none';
        }

        // Ê®°ÊãüËÄÉËØïÂäüËÉΩ
        function openExamSettings(type) {
            alert('ËÄÉËØïËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        function startRealExam() {
            alert('ÂÖ®ÁúüÊ®°ÊãüËÄÉËØïÂºÄÂèë‰∏≠...');
        }

        function openChapterSelect() {
            alert('Á´†ËäÇËØïÁÇºÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ
            checkLoginStatus();
            
            // ÊÅ¢Â§ç‰øùÂ≠òÁöÑËÆæÁΩÆ
            const savedTheme = localStorage.getItem('darkMode');
            if (savedTheme === 'true') {
                document.body.classList.add('dark-mode');
                document.getElementById('themeSwitch').classList.add('active');
                document.querySelector('.theme-switch-slider').textContent = 'üåô';
            }
            
            const savedColor = localStorage.getItem('themeColor');
            if (savedColor) {
                document.body.setAttribute('data-theme', savedColor);
            }
            
            const savedLicense = localStorage.getItem('licenseType');
            if (savedLicense && questionBanks[savedLicense]) {
                selectLicense(savedLicense);
            } else {
                // ËÆæÁΩÆÈªòËÆ§ÊâßÁÖßÁ±ªÂûã
                selectLicense('Ë∂ÖËßÜË∑ùÈ©æÈ©∂Âëò');
            }
            
            const savedClass = localStorage.getItem('currentClass');
            if (savedClass) {
                currentClass = JSON.parse(savedClass);
                document.getElementById('className').textContent = currentClass.name;
                document.getElementById('classLicense').textContent = currentClass.licenseType;
                document.getElementById('classCount').textContent = currentClass.count + '‰∫∫';
                document.getElementById('classTeacher').textContent = currentClass.teacher;
                document.getElementById('classInfo').classList.add('active');
            }
            
            // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠‰∏ãÊãâËèúÂçïÂíåÊ®°ÊÄÅÊ°Ü
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.license-selector')) {
                    document.getElementById('licenseDropdown').classList.remove('active');
                }
                if (!e.target.closest('.color-picker-wrapper')) {
                    document.getElementById('colorPickerPanel').classList.remove('active');
                }
                // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜËÉåÊôØÂÖ≥Èó≠
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });
        });

        // Ê®°Êãü‰∏Ä‰∫õËÄÉËØïËÆ∞ÂΩïÊï∞ÊçÆ
        if (examRecords.length === 0) {
            examRecords = [
                {
                    id: 'exam_001',
                    type: 'timed',
                    date: '2024-12-15 14:30',
                    score: 85,
                    passed: true,
                    correctCount: 17,
                    totalCount: 20
                },
                {
                    id: 'exam_002',
                    type: 'real',
                    date: '2024-12-14 10:00',
                    score: 68,
                    passed: false,
                    correctCount: 68,
                    totalCount: 100
                }
            ];
            
            ongoingExams = [
                {
                    id: 'exam_003',
                    type: 'timed',
                    date: '2024-12-15 16:00',
                    endTime: Date.now() + 30 * 60 * 1000, // 30ÂàÜÈíüÂêéËøáÊúü
                    currentQuestion: 5,
                    totalCount: 20
                }
            ];
            
            localStorage.setItem('examRecords', JSON.stringify(examRecords));
            localStorage.setItem('ongoingExams', JSON.stringify(ongoingExams));
        }
    </script>
</body>
</html>